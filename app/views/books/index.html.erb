<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Books Collection</h1>
  <span class="badge bg-primary fs-6"><%= @total_books %> Total Books</span>
</div>

<!-- Pagination at top -->
<div class="d-flex justify-content-center mb-4">
  <%= paginate @books %>
</div>

<% if @books.any? %>
  <div class="row">
    <% @books.each do |book| %>
      <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100">
          <% if book.cover_medium_url %>
            <img src="<%= book.cover_medium_url %>" class="card-img-top" style="height: 200px; object-fit: cover;" alt="<%= book.title %>">
          <% end %>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><%= book.title %></h5>
            <p class="card-text">
              <strong>Authors:</strong> 
              <% book.authors.each do |author| %>
                <%= link_to author.name, author_path(author), class: "text-decoration-none" %>
                <%= ", " unless author == book.authors.last %>
              <% end %>
            </p>
            <p class="card-text">
              <strong>Publisher:</strong> 
              <%= link_to book.publisher.name, publisher_path(book.publisher), class: "text-decoration-none" if book.publisher %>
            </p>
            <p class="card-text">
              <strong>Subjects:</strong>
              <% book.subjects.first(3).each do |subject| %>
                <span class="badge bg-secondary me-1">
                  <%= link_to subject.name, subject_path(subject), class: "text-white text-decoration-none" %>
                </span>
              <% end %>
            </p>
            <p class="card-text"><small class="text-muted">Published: <%= book.publish_date %></small></p>
            <div class="mt-auto">
              <%= link_to "View Details", book_path(book), class: "btn btn-primary" %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Pagination at bottom -->
  <div class="d-flex justify-content-center mt-4">
    <%= paginate @books %>
  </div>

  <!-- Page info -->
  <div class="text-center mt-2">
    <small class="text-muted">
      Showing <%= @books.offset_value + 1 %>-<%= [@books.offset_value + @books.limit_value, @total_books].min %> 
      of <%= @total_books %> books
    </small>
  </div>
<% else %>
  <div class="alert alert-info">
    <h4>No books found</h4>
    <p>Try adjusting your search or browse our collections.</p>
  </div>
<% end %>